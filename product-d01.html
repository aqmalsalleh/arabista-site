<!doctype html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dahlia D01 Abaya — Arabista</title>
  <meta name="description" content="Minimalist one-piece abaya in Premium Nidha Dubai, soft and cool to the skin, with a 10” front zip (nursing-friendly), dual side pockets, and inner sleeve lining (wudhu’-friendly). Includes a free matching chiffon shawl (1.9m × 0.7m) and premium gift box. Lowest price guaranteed." />

  <!-- Open Graph -->
  <meta property="og:title" content="Dahlia D01 Abaya — Arabista" />
  <meta property="og:description" content="Premium Nidha Dubai, 10” front zip, pockets, inner sleeve lining, free matching shawl, premium gift box." />
  <meta property="og:type" content="product" />
  <meta property="og:image" content="images/d01-og.jpg" />
  <meta property="og:url" content="https://<yourusername>.github.io/product-d01.html" />
  <meta name="theme-color" content="#0F0F10" />

  <!-- Fonts & Tailwind -->
  <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { display: ['"Cormorant Garamond"', 'serif'], sans: ['Inter','ui-sans-serif','system-ui'] },
          colors: { brand:'#0F0F10', luxe:'#C0A062', ink:'#111213' },
          boxShadow: { soft: '0 10px 30px rgba(0,0,0,.08)' }
        }
      }
    }
  </script>
  <style>
    .tap-none{-webkit-tap-highlight-color:transparent}
    .thumb-active{outline:2px solid rgba(255,255,255,.4)}
    .reveal{opacity:0;transform:translateY(12px);transition:.6s}
    .reveal.show{opacity:1;transform:none}
    .review-text.clamp{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;overflow:hidden;}
  </style>

  <!-- JSON-LD Product -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org/",
    "@type":"Product",
    "name":"Dahlia D01 Abaya",
    "image":[
      "images/d01-1.jpg",
      "images/d01-2.jpg",
      "images/d01-3.jpg",
      "images/d01-4.jpg"
    ],
    "description":"Minimalist one-piece abaya in Premium Nidha Dubai, soft and cool to the skin, with a 10” front zip (nursing-friendly), dual side pockets, and inner sleeve lining (wudhu’-friendly). Includes a free matching chiffon shawl (1.9m × 0.7m) and premium gift box. Lowest price guaranteed.",
    "brand":{"@type":"Brand","name":"Arabista"},
    "sku":"D01",
    "offers":{
      "@type":"Offer",
      "priceCurrency":"MYR",
      "price":"139.00",
      "availability":"https://schema.org/InStock",
      "url":"https://<yourusername>.github.io/product-d01.html"
    }
  }
  </script>
</head>
<body class="bg-brand text-white antialiased tap-none">
  <!-- Navbar -->
  <header class="fixed top-0 inset-x-0 z-50 backdrop-blur bg-brand/80">
    <div class="max-w-screen-xl mx-auto px-4 sm:px-6">
      <div class="h-14 grid grid-cols-3 items-center">
        <a href="index.html#home" class="font-display tracking-[0.18em] text-[14px]">ARABISTA</a>
        <a href="index.html#home" class="justify-self-center"><img src="images/logo.png" alt="Arabista logo" class="h-11 w-auto"></a>
        <nav class="justify-self-end hidden sm:flex gap-4 text-sm">
          <a href="index.html#shop" class="hover:text-luxe">Shop</a>
          <a href="index.html#about" class="hover:text-luxe">About</a>
          <a href="index.html#contact" class="hover:text-luxe">Contact</a>
        </nav>
      </div>
    </div>
  </header>

  <main class="pt-20">
    <!-- Breadcrumb -->
    <nav class="max-w-screen-xl mx-auto px-4 sm:px-6 text-xs text-white/60">
      <ol class="flex items-center gap-2 py-3">
        <li><a href="index.html" class="hover:text-luxe">Home</a></li><li>›</li>
        <li><a href="index.html#shop" class="hover:text-luxe">Signature Collection</a></li><li>›</li>
        <li><a href="index.html#dahlia" class="hover:text-luxe">Dahlia</a></li><li>›</li>
        <li class="text-white">D01</li>
      </ol>
    </nav>

    <!-- Gallery + Buy Panel -->
    <section class="max-w-screen-xl mx-auto px-4 sm:px-6 grid lg:grid-cols-2 gap-8 items-start" id="gallery">
      <!-- Gallery -->
      <div>
        <div class="aspect-[3/4] bg-black/30 rounded-2xl overflow-hidden relative">
          <!-- Main media slot: start with autoplaying video -->
          <div id="mediaSlot" class="w-full h-full">
            <video id="mainVideo" autoplay muted loop playsinline class="w-full h-full object-cover">
              <source src="images/d01-hero.mp4" type="video/mp4">
              Your browser does not support the video tag.
            </video>
          </div>

          <!-- Prev/Next arrows (active when image is shown) -->
          <button id="imgPrev" type="button" aria-label="Previous image"
            class="absolute z-10 left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 rounded-full w-10 h-10 flex items-center justify-center">
            <span aria-hidden="true" class="text-white text-2xl leading-none select-none">‹</span>
          </button>
          <button id="imgNext" type="button" aria-label="Next image"
            class="absolute z-10 right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 rounded-full w-10 h-10 flex items-center justify-center">
            <span aria-hidden="true" class="text-white text-2xl leading-none select-none">›</span>
          </button>
        </div>

        <!-- Thumbnails -->
        <div class="mt-3 grid grid-cols-4 gap-2">
          <button class="rounded-xl overflow-hidden thumb-active" data-src="images/d01-1.jpg"><img src="images/d01-1-thumb.jpg" class="w-full h-20 object-cover" alt=""></button>
          <button class="rounded-xl overflow-hidden" data-src="images/d01-2.jpg"><img src="images/d01-2-thumb.jpg" class="w-full h-20 object-cover" alt=""></button>
          <button class="rounded-xl overflow-hidden" data-src="images/d01-3.jpg"><img src="images/d01-3-thumb.jpg" class="w-full h-20 object-cover" alt=""></button>
          <button class="rounded-xl overflow-hidden" data-src="images/d01-4.jpg"><img src="images/d01-4-thumb.jpg" class="w-full h-20 object-cover" alt=""></button>
        </div>
      </div>

      <!-- Buy Panel -->
      <div>
        <h1 class="font-display text-3xl sm:text-5xl leading-tight">
          Dahlia D01 — Premium Nidha Dubai
        </h1>
        <p class="mt-2 text-white/70 text-sm">
          Minimalist one-piece abaya in <strong>Premium Nidha Dubai</strong>, soft and cool to the skin, with a
          <strong>10” front zip (nursing-friendly)</strong>, <strong>dual side pockets</strong>, and
          <strong>inner sleeve lining</strong> (wudhu’-friendly). Includes a <strong>free matching chiffon shawl (1.9m × 0.7m)</strong>
          and <strong>premium gift box</strong>. <strong>Lowest price guaranteed.</strong>
        </p>

        <div class="mt-4 flex items-center gap-3">
          <p class="text-2xl font-semibold">RM 139.00</p>
          <span class="text-white/50 text-sm">Code: D01</span>
        </div>

        <!-- Badges -->
        <div class="mt-4 flex flex-wrap gap-2 text-xs">
          <span class="px-2.5 py-1 rounded-full bg-white/10 border border-white/10">Premium Nidha</span>
          <span class="px-2.5 py-1 rounded-full bg-white/10 border border-white/10">10” front zip</span>
          <span class="px-2.5 py-1 rounded-full bg-white/10 border border-white/10">Pockets (L/R)</span>
          <span class="px-2.5 py-1 rounded-full bg-white/10 border border-white/10">Inner sleeve lining</span>
          <span class="px-2.5 py-1 rounded-full bg-white/10 border border-white/10">Free shawl 1.9×0.7 m</span>
          <span class="px-2.5 py-1 rounded-full bg-white/10 border border-white/10">Premium gift box</span>
          <span class="px-2.5 py-1 rounded-full bg-white/10 border border-white/10">Fast delivery</span>
        </div>

        <!-- Size selector -->
        <div class="mt-6">
          <div class="flex items-center justify-between">
            <label class="text-sm text-white/80">Select Size</label>
            <button type="button" class="text-sm underline decoration-white/30 hover:text-luxe" onclick="document.getElementById('size-guide').scrollIntoView({behavior:'smooth'})">Size guide</button>
          </div>
          <div id="sizes" class="mt-2 grid grid-cols-6 gap-2">
            <button type="button" data-size="XS (36)" class="size-btn px-3 py-2 rounded-xl border border-white/15">XS</button>
            <button type="button" data-size="S (38)"  class="size-btn px-3 py-2 rounded-xl border border-white/15">S</button>
            <button type="button" data-size="M (40)"  class="size-btn px-3 py-2 rounded-xl border border-white/15">M</button>
            <button type="button" data-size="L (42)"  class="size-btn px-3 py-2 rounded-xl border border-white/15">L</button>
            <button type="button" data-size="XL (44)" class="size-btn px-3 py-2 rounded-xl border border-white/15">XL</button>
            <button type="button" data-size="XXL (46)" class="size-btn px-3 py-2 rounded-xl border border-white/15">XXL</button>
            <button type="button" data-size="XXXL (50)" class="size-btn px-3 py-2 rounded-xl border border-white/15 col-span-2">XXXL</button>
          </div>
          <p id="sizeChosen" class="mt-2 text-xs text-white/60">Size: —</p>
        </div>

        <!-- Quantity + CTA -->
        <div class="mt-4 flex items-center gap-3">
          <label for="qty" class="text-sm text-white/80">Qty</label>
          <div class="flex items-center rounded-xl border border-white/15">
            <button type="button" class="px-3 py-2" onclick="changeQty(-1)">−</button>
            <input id="qty" value="1" class="w-12 text-center bg-transparent py-2 focus:outline-none" />
            <button type="button" class="px-3 py-2" onclick="changeQty(1)">＋</button>
          </div>
        </div>

        <div class="mt-4 flex gap-3">
          <a id="waBtn" target="_blank" class="flex-1 inline-flex items-center justify-center gap-2 bg-luxe text-ink px-6 py-3 rounded-xl text-sm font-medium hover:opacity-90 transition shadow-soft" href="#">Buy on WhatsApp</a>
          <button type="button" class="px-4 py-3 rounded-xl ring-1 ring-white/15 text-sm hover:bg-white/5" onclick="toggleSave()" aria-label="Save">♥</button>
        </div>

        <p class="mt-3 text-xs text-white/60">⭐ 4.9 rating · 273 reviews · 1.4K sold on TikTok</p>
        <p class="mt-1 text-xs text-white/60">Delivery: 1–3 days within Peninsular Malaysia; 3–5 days for Sabah & Sarawak.</p>
      </div>
    </section>

    <!-- Size & Fit -->
    <section id="size-guide" class="reveal max-w-screen-xl mx-auto px-4 sm:px-6 mt-10">
      <div class="rounded-2xl border border-white/10 p-5 sm:p-6">
        <h2 class="font-display text-2xl sm:text-3xl">Size & Fit</h2>
        <p class="mt-2 text-white/70 text-sm">Abaya <strong>A-Cutting</strong>. If between sizes, choose the larger for modest drape.</p>

        <!-- Size Helper (English) -->
        <div class="mt-4 rounded-2xl border border-white/10 p-4 sm:p-5">
          <h3 class="font-display text-xl mb-3">Size Helper</h3>
          <div class="grid sm:grid-cols-4 gap-3">
            <label class="text-sm">
              <span class="block text-white/70 mb-1">Height (cm)</span>
              <input id="sh-height" type="number" inputmode="decimal" min="120" max="190" placeholder="e.g., 160" class="w-full rounded-xl bg-transparent ring-1 ring-white/15 px-3 py-2" />
            </label>
            <label class="text-sm">
              <span class="block text-white/70 mb-1">Weight (kg)</span>
              <input id="sh-weight" type="number" inputmode="decimal" min="35" max="120" placeholder="e.g., 55" class="w-full rounded-xl bg-transparent ring-1 ring-white/15 px-3 py-2" />
            </label>
            <label class="text-sm">
              <span class="block text-white/70 mb-1">Bust (inches, optional)</span>
              <input id="sh-bust" type="number" inputmode="decimal" step="0.1" placeholder="e.g., 37" class="w-full rounded-xl bg-transparent ring-1 ring-white/15 px-3 py-2" />
            </label>
            <div class="flex items-end">
              <button id="sh-calc" class="w-full rounded-xl bg-luxe text-ink px-4 py-2 text-sm font-medium hover:opacity-90">Get My Size</button>
            </div>
          </div>

          <div class="mt-3 text-sm" aria-live="polite">
            <div id="sh-result" class="mb-1"></div>
            <div id="sh-note" class="text-white/60"></div>
            <div id="sh-bustguide" class="text-white/60 mt-1"></div>
            <div id="sh-warning" class="text-white/70 mt-2"></div>
          </div>
        </div>

        <!-- Table: UPDATED to inches from your chart -->
        <div class="mt-6 overflow-x-auto">
          <table class="w-full text-left text-sm">
            <thead class="text-white/70">
              <tr class="border-b border-white/10">
                <th class="py-2 pr-3">Size</th>
                <th class="py-2 pr-3">Shoulder (in)</th>
                <th class="py-2 pr-3">Bust (in)</th>
                <th class="py-2 pr-3">Sleeve (in)</th>
                <th class="py-2 pr-3">Length (in)</th>
              </tr>
            </thead>
            <tbody class="text-white/80">
              <tr><td class="py-2 pr-3">XS (36)</td><td>14</td><td>36</td><td>22</td><td>55</td></tr>
              <tr><td class="py-2 pr-3">S (38)</td><td>15</td><td>39</td><td>22</td><td>55</td></tr>
              <tr><td class="py-2 pr-3">M (40)</td><td>16</td><td>40</td><td>23</td><td>57</td></tr>
              <tr><td class="py-2 pr-3">L (42)</td><td>16.5</td><td>43</td><td>23.5</td><td>60</td></tr>
              <tr><td class="py-2 pr-3">XL (44)</td><td>17.5</td><td>44</td><td>23.5</td><td>60</td></tr>
              <tr><td class="py-2 pr-3">XXL (46)</td><td>18</td><td>46</td><td>23.5</td><td>60</td></tr>
              <tr><td class="py-2 pr-3">XXXL (50)</td><td>19</td><td>50</td><td>23.5</td><td>60</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Accordions -->
    <section class="reveal max-w-screen-xl mx-auto px-4 sm:px-6 mt-6 grid lg:grid-cols-3 gap-4">
      <details class="rounded-2xl border border-white/10 p-5">
        <summary class="cursor-pointer text-lg font-display">Details & Features</summary>
        <ul class="mt-3 list-disc list-inside text-white/75 text-sm space-y-1">
          <li>Premium Nidha Dubai — soft, breathable, cool</li>
          <li>10” front zip (nursing-friendly)</li>
          <li>Dual side pockets</li>
          <li>Inner sleeve lining (wudhu’-friendly)</li>
          <li>Free matching chiffon shawl (1.9 m × 0.7 m)</li>
          <li>Premium black gift box</li>
        </ul>
      </details>
      <details class="rounded-2xl border border-white/10 p-5">
        <summary class="cursor-pointer text-lg font-display">Care</summary>
        <p class="mt-3 text-white/75 text-sm">Hand wash or gentle cycle. Do not tumble dry. Steam/low iron if needed.</p>
      </details>
      <details class="rounded-2xl border border-white/10 p-5">
        <summary class="cursor-pointer text-lg font-display">Shipping & Returns</summary>
        <p class="mt-3 text-white/75 text-sm">
          Estimated delivery: 1–3 days within Peninsular Malaysia and 3–5 days for Sabah & Sarawak.
          Size exchanges accepted within 7 days if unworn and tagged.
        </p>
      </details>
    </section>

    <!-- REVIEWS: What Our Customers Say -->
    <section id="reviews" class="reveal max-w-screen-xl mx-auto px-4 sm:px-6 mt-10">
      <h2 class="font-display text-2xl sm:text-3xl mb-3">What Our Customers Say</h2>

      <!-- Container where review cards render -->
      <div id="reviewList" class="divide-y divide-white/10 border border-white/10 rounded-2xl overflow-hidden"></div>

      <!-- Pagination controls -->
      <div class="mt-4 flex items-center justify-between">
        <button id="prevBtn" class="px-4 py-2 rounded-xl ring-1 ring-white/15 hover:bg-white/5 text-sm disabled:opacity-40 disabled:cursor-not-allowed">Previous</button>
        <div class="text-xs text-white/60">Page <span id="pageNum">1</span> of <span id="pageTotal">—</span></div>
        <button id="nextBtn" class="px-4 py-2 rounded-xl ring-1 ring-white/15 hover:bg-white/5 text-sm disabled:opacity-40 disabled:cursor-not-allowed">Next</button>
      </div>

      <!-- Last-page TikTok preview (hidden until last page) -->
      <div id="tiktokPreview" class="hidden mt-4">
        <a href="https://vt.tiktok.com/ZSHnDRphXWjk2-DE4dI/" target="_blank" class="block rounded-2xl border border-white/10 hover:border-white/20 transition">
          <div class="p-4 sm:p-5 flex items-start gap-3">
            <div class="shrink-0 rounded-xl bg-white p-2">
              <svg width="28" height="28" viewBox="0 0 48 48" aria-hidden="true">
                <path d="M33.3 13.4c2.4 1.8 5.4 2.9 8.7 2.9v7.2c-3.7 0-7.1-1.1-10-3.1v12.1c0 7.4-6 13.4-13.4 13.4S5.2 39.9 5.2 32.5 11.2 19.1 18.6 19.1c1 0 2 .1 2.9.4v7.5c-.9-.3-1.9-.5-2.9-.5-4 0-7.2 3.2-7.2 7.2s3.2 7.2 7.2 7.2 7.2-3.2 7.2-7.2V5.9h7.3c.2 2.9 1.7 5.5 4.2 7.5z" fill="#000"/>
              </svg>
            </div>
            <div class="min-w-0">
              <div class="text-sm font-medium">View on TikTok</div>
              <div class="text-xs text-white/60 truncate">https://vt.tiktok.com/ZSHnDRphXWjk2-DE4dI/</div>
              <p class="mt-2 text-sm text-white/70">See all reviews and purchase directly on TikTok Shop.</p>
            </div>
          </div>
        </a>
      </div>

      <!-- Schema.org (Aggregate + a few example reviews) -->
      <script type="application/ld+json" id="reviews-ld">
      {
        "@context":"https://schema.org",
        "@type":"Product",
        "name":"Dahlia D01 Abaya",
        "sku":"D01",
        "aggregateRating":{
          "@type":"AggregateRating",
          "ratingValue":"4.9",
          "reviewCount":"71"
        },
        "review":[
          {"@type":"Review","reviewRating":{"@type":"Rating","ratingValue":"5"},
           "author":{"@type":"Person","name":"L**a"},
           "reviewBody":"Beautiful heavy fabric that drapes well, gives a taller and slimmer effect."},
          {"@type":"Review","reviewRating":{"@type":"Rating","ratingValue":"5"},
           "author":{"@type":"Person","name":"c**e k**"},
           "reviewBody":"Abaya received well-packed in a box. The cut is nice too."},
          {"@type":"Review","reviewRating":{"@type":"Rating","ratingValue":"5"},
           "author":{"@type":"Person","name":"T**p S**"},
           "reviewBody":"Arabista abaya design and material are very high quality; will buy again."}
        ]
      }
      </script>
    </section>
<section class="reveal max-w-screen-xl mx-auto px-4 sm:px-6 mt-10">
      <h2 class="font-display text-2xl sm:text-3xl">You may also like</h2>
      <div class="mt-4 grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-6">
        <a href="product-zahra.html" class="group overflow-hidden rounded-2xl border border-white/10 hover:border-white/20 transition">
          <img src="images/zahra-card.jpg" class="aspect-[3/4] object-cover group-hover:scale-105 transition" alt="Zahra"/>
          <div class="p-3"><p class="text-sm">Zahra</p><p class="text-white/50 text-xs">From RM 249</p></div>
        </a>
        <a href="product-warda.html" class="group overflow-hidden rounded-2xl border border-white/10 hover:border-white/20 transition">
          <img src="images/warda-card.jpg" class="aspect-[3/4] object-cover group-hover:scale-105 transition" alt="Warda"/>
          <div class="p-3"><p class="text-sm">Warda</p><p class="text-white/50 text-xs">From RM 259</p></div>
        </a>
        <a href="product-maraya.html" class="group overflow-hidden rounded-2xl border border-white/10 hover:border-white/20 transition">
          <img src="images/maraya-card.jpg" class="aspect-[3/4] object-cover group-hover:scale-105 transition" alt="Maraya"/>
          <div class="p-3"><p class="text-sm">Maraya</p><p class="text-white/50 text-xs">From RM 299</p></div>
        </a>
        <a href="index.html#shop" class="group overflow-hidden rounded-2xl border border-white/10 hover:border-white/20 transition">
          <img src="images/collection-card.jpg" class="aspect-[3/4] object-cover" alt="All Collections"/>
          <div class="p-3"><p class="text-sm">See all</p><p class="text-white/50 text-xs">Explore collections</p></div>
        </a>
      </div>
    </section>
    <!-- Related -->
    
  </main>

  <!-- Footer -->
  <footer class="border-t border-white/10 py-8 mt-12">
    <div class="max-w-screen-xl mx-auto px-4 sm:px-6 flex flex-col sm:flex-row items-center justify-between gap-4">
      <p class="text-white/50 text-xs">© <span id="y"></span> Arabista. All rights reserved.</p>
      <nav class="flex items-center gap-4 text-white/70 text-sm">
        <a href="index.html#home" class="hover:text-luxe">Home</a>
        <a href="index.html#shop" class="hover:text-luxe">Shop</a>
        <a href="index.html#about" class="hover:text-luxe">About</a>
        <a href="index.html#contact" class="hover:text-luxe">Contact</a>
      </nav>
    </div>
  </footer>

  <!-- Sticky mobile buy bar -->
  <div class="fixed bottom-0 inset-x-0 z-40 sm:hidden bg-brand/80 backdrop-blur border-t border-white/10">
    <div class="max-w-screen-xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="text-sm">
        <div class="font-medium">Dahlia D01</div>
        <div class="text-white/60">RM 139.00</div>
      </div>
      <a id="waBtnSticky" target="_blank" class="inline-flex items-center gap-2 bg-luxe text-ink px-4 py-2 rounded-lg text-sm font-medium" href="#">Buy</a>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    // Reveal on scroll
    const io=new IntersectionObserver(es=>es.forEach(e=>{if(e.isIntersecting)e.target.classList.add('show')}),{threshold:.12});
    document.querySelectorAll('.reveal').forEach(el=>io.observe(el));
    document.getElementById('y').textContent=new Date().getFullYear();

    // Gallery thumbs (re-center main image on click)
    const mainImg=document.getElementById('mainImg');
    document.querySelectorAll('[data-src]').forEach(btn=>{
      btn.addEventListener('click',()=>{
        document.querySelectorAll('[data-src]').forEach(b=>b.classList.remove('thumb-active'));
        btn.classList.add('thumb-active'); 
        mainImg.src=btn.dataset.src;
        
      });
    });

    // Size selection (also used by Size Helper)
    let selectedSize='';
    function setSizeChip(sz){ // sz: "XS".."XXXL"
      const btns=document.querySelectorAll('.size-btn');
      let matched=null;
      btns.forEach(x=>{
        x.classList.remove('ring-2','ring-white/60');
        const label=x.textContent.trim().toUpperCase();
        if(!matched && label===sz.toUpperCase()){ matched=x; }
      });
      if(matched){
        matched.classList.add('ring-2','ring-white/60');
        selectedSize = matched.dataset.size || sz;
        document.getElementById('sizeChosen').textContent='Size: '+selectedSize;
        updateWA();
        
      }
    }
    document.querySelectorAll('.size-btn').forEach(b=>{
      b.addEventListener('click',()=>{
        document.querySelectorAll('.size-btn').forEach(x=>x.classList.remove('ring-2','ring-white/60'));
        b.classList.add('ring-2','ring-white/60'); selectedSize=b.dataset.size;
        document.getElementById('sizeChosen').textContent='Size: '+selectedSize; updateWA();
      });
    });

    // Qty controls
    function changeQty(d){const el=document.getElementById('qty'); let v=parseInt(el.value||1,10)+d; if(isNaN(v)||v<1)v=1; if(v>10)v=10; el.value=v; updateWA();}

    // WhatsApp deep link (Malay msg kept as before)
    function updateWA(){
      const qty=document.getElementById('qty').value||1;
      const size=selectedSize||'—';
      const msg=encodeURIComponent(
        `Assalamualaikum Arabista, saya mahu beli:\n`+
        `• Produk: Dahlia D01\n• Saiz: ${size}\n• Kuantiti: ${qty}\n• Harga: RM 139.00\n\nSila sahkan stok & cara bayaran.`
      );
      const phone='60126913286';
      const href=`https://wa.me/${phone}?text=${msg}`;
      document.getElementById('waBtn').href=href;
      document.getElementById('waBtnSticky').href=href;
    }
    updateWA();

    // Save (client-only)
    function toggleSave(){const k='saved-d01'; const v=localStorage.getItem(k); if(v){localStorage.removeItem(k); alert('Removed from saved');} else {localStorage.setItem(k,'1'); alert('Saved for later');}}
  </script>

  <!-- ----- Size Helper Logic (English, mirrors your Sheet) ----- -->
  <script>
  (function(){
    const ORDER = ["XS","S","M","L","XL","XXL","XXXL"];
    const HEIGHT_MAX = { XS:163, S:163, M:166, L:172, XL:172, XXL:172, XXXL:172 };
    const BUST_MAX_IN = { XS:36, S:39, M:40, L:43, XL:44, XXL:46, XXXL:50 };

    const hEl=document.getElementById('sh-height');
    const wEl=document.getElementById('sh-weight');
    const bEl=document.getElementById('sh-bust');
    const res=document.getElementById('sh-result');
    const note=document.getElementById('sh-note');
    const bustguide=document.getElementById('sh-bustguide');
    const warn=document.getElementById('sh-warning');

    const fmt=(n)=>Number(n).toFixed(n%1?1:0);

    function bmiSize(heightCm,weightKg){
      const heightM = heightCm/100;
      const adjW = (heightCm<=155)? (weightKg-3): weightKg;
      const bmi = adjW/(heightM*heightM);
      if(bmi < 19.5) return {size:"XS", bmi};
      if(bmi <=21.9) return {size:"S", bmi};
      if(bmi <=24.5) return {size:"M", bmi};
      if(bmi <=26.6) return {size:"L", bmi};
      if(bmi <=29)   return {size:"XL", bmi};
      if(bmi <=31.5) return {size:"XXL", bmi};
      if(bmi <=37.5) return {size:"XXXL", bmi};
      return {size:"Size Not Available", bmi};
    }

    function ensureHeight(size,heightCm){
      if(size==="Size Not Available") return size;
      let idx = ORDER.indexOf(size);
      while(idx<ORDER.length && heightCm>HEIGHT_MAX[ORDER[idx]]) idx++;
      return ORDER[idx] || "Size Not Available";
    }

    function biggerOf(a,b){
      if(a==="Size Not Available" || b==="Size Not Available") return "Size Not Available";
      return ORDER.indexOf(a) > ORDER.indexOf(b) ? a : b;
    }

    function bustLine(size){
      const map = { XS:36, S:39, M:40, L:43, XL:44, XXL:46, XXXL:50 };
      if(!map[size]) return "Bust guide not available.";
      return `Bust guide for ${size}: under ${map[size]} inches.`;
    }

    function reasonLine(bmiSz,heightCm){
      if(!HEIGHT_MAX[bmiSz]) return "";
      const ceil = HEIGHT_MAX[bmiSz];
      return `your height ${fmt(heightCm)} cm exceeds the maximum for ${bmiSz} which is ${ceil} cm.`;
    }

    function calc(){
      res.textContent = note.textContent = bustguide.textContent = warn.textContent = "";
      const h = parseFloat(hEl.value);
      const w = parseFloat(wEl.value);
      const bust = parseFloat(bEl.value);

      if(!h || !w){ warn.textContent="Please enter height and weight to get a recommendation."; return; }
      if(h<120 || h>190 || w<35 || w>120){
        warn.textContent="Values are outside our typical range. Results may be less accurate.";
      }

      const {size: J7} = bmiSize(h,w);
      if(J7==="Size Not Available" || (w/((h/100)**2))>37.5){
        res.innerHTML = `<span class="px-2.5 py-1 rounded-full bg-white/10 border border-white/10">Recommendation</span>
        <span class="ml-2 font-medium">Not available</span>`;
        note.textContent = "Sorry, this abaya may not suit your current height and weight.";
        return;
      }

      if(h>173){
        res.innerHTML = `<span class="px-2.5 py-1 rounded-full bg-white/10 border border-white/10">Recommendation</span>
        <span class="ml-2 font-medium">May be short</span>`;
        note.textContent = `Sorry, at ${fmt(h)} cm the length may be too short for this design.`;
        return;
      }

      const K7 = ensureHeight(J7,h);
      const J8 = biggerOf(J7,K7);

      res.innerHTML = `<span class="px-2.5 py-1 rounded-full bg-white/10 border border-white/10">Recommended</span>
      <span class="ml-2 font-medium">${J8}</span>
      <button class="ml-3 text-xs underline decoration-white/30 hover:text-luxe" id="sh-set">Set this size</button>`;

      if(h<157){
        if(J7===J8){
          note.textContent = `You can take size ${J8}. You may need a slight hemming.`;
        }else{
          note.textContent = `Your computed size is ${J7} but you should take ${J8} because ${reasonLine(J7,h)} You may need a slight hemming.`;
        }
      }else{
        if(J7===J8){
          note.textContent = `You can take size ${J8}.`;
        }else{
          note.textContent = `Please take ${J8} to avoid a short length.`;
        }
      }

      bustguide.textContent = bustLine(J8);
      if (bust && BUST_MAX_IN[J8] && bust >= BUST_MAX_IN[J8]) {
        bustguide.textContent += ` Your bust (${bust}") exceeds the suggested upper bound; consider sizing up.`;
      }

      try{
        localStorage.setItem('sh_height',h);
        localStorage.setItem('sh_weight',w);
        if(bust) localStorage.setItem('sh_bust',bust);
      }catch(e){}

      setTimeout(()=>{
        const setBtn=document.getElementById('sh-set');
        if(setBtn) setBtn.onclick=()=> setSizeChip(J8);
      },0);
    }

    try{
      const ph=localStorage.getItem('sh_height'); if(ph) hEl.value=ph;
      const pw=localStorage.getItem('sh_weight'); if(pw) wEl.value=pw;
      const pb=localStorage.getItem('sh_bust'); if(pb) bEl.value=pb;
    }catch(e){}

    document.getElementById('sh-calc').addEventListener('click', calc);
    [hEl,wEl,bEl].forEach(el=>el.addEventListener('keydown', e=>{ if(e.key==='Enter'){ e.preventDefault(); calc(); }}));
  })();
  </script>

  <!-- ----- D01 Reviews Renderer (5-per-page with Next/Previous; TikTok preview on last page) ----- -->
  <script>
  (function(){
    // === Full reviews (username, size, rating, original, english) ===
    const FULL = [{"username":"L**a","size":"M","rating":5,"original":"Cantik kain berat and jatuh, so ada effect tinggi and kurus","english":"Beautiful heavy fabric that drapes well, gives a taller and slimmer effect."},{"username":"S**v","size":"L","rating":5,"original":"Alhamdulillah sgt berpuas hati.. material kain best, kemas jahitan, berbaloi beli..","english":"Thank God, very satisfied—the fabric is great, stitching neat, worth the purchase."},{"username":"n**f","size":"XXL","rating":5,"original":"Kain jenis berat .. dada 42 je tpi ambil 1 bigger size mmg ngam.. XXL cun..","english":"Heavy fabric. Bust 42\" but took one size up; XXL fits perfectly."},{"username":"c**e k**","size":"S","rating":5,"original":"Jubah dah diterima dibungkus dgn baik, siap ada kotak. Cutting pun lawa.","english":"Abaya received well-packed in a box. The cut is nice too."},{"username":"F*R","size":"M","rating":5,"original":"Alhamdulillah dh sampai, sempat grab masa offer. Kain cantik dan kemas.","english":"Thank God it arrived; managed to grab it during the offer. The fabric is pretty and neat."},{"username":"N**a","size":"XS","rating":5,"original":"alhmdulillah selamat sampai. Pertama kali pakai abaya. Sangat cantik. ❤️","english":"Thank God it arrived safely. First time wearing an abaya—very beautiful. ❤️"},{"username":"P**n A**n","size":"S","rating":5,"original":"Kain sejuk dan lembut. Size ngam utk saya yg berat 54kg.","english":"Fabric is cool and soft. Size fits me (54 kg)."},{"username":"F**E","size":"S","rating":5,"original":"Cantik sgt abaya nya, packaging exclusive. Seller pun baik.","english":"The abaya is very beautiful, exclusive packaging. Seller is nice too."},{"username":"M**a N**i","size":"XXL","rating":5,"original":"Baju n material sungguh cantik nnt nk beli lg ❤️","english":"The dress and material are truly beautiful—will buy again. ❤️"},{"username":"A**n","size":"S","rating":5,"original":"alhamdullilah.. kain selesa, saiz ngam (S)","english":"Thank God... fabric is comfortable, size fits (S)."},{"username":"A**a","size":"XXL","rating":5,"original":"Baju cantik sungguh. Abg courier pun ckp cantik 😅 tq seller 😍","english":"The dress is really beautiful. Even the courier said it’s pretty 😅 thanks seller 😍"},{"username":"S** M**","size":"S","rating":5,"original":"Saya suka sgt dengan tgn dia sebab yg paling saya suka adalah jenis yg inner penuh. Kain sejuk.","english":"I really love the sleeves—especially the full inner lining. The fabric is cool."},{"username":"y**g L**","size":"XS","rating":5,"original":"Alhamdulillah sampai dengan baik. Saiz semua cantik & kain kualiti terbaik sejuk. Akan repeat order.","english":"Thank God it arrived well. Sizes are great and the fabric is cool, top quality. Will reorder."},{"username":"H**a","size":"S","rating":5,"original":"Selesa, cutting cantik, kain sejuk.","english":"Comfortable, beautiful cutting, cool fabric."},{"username":"H**a","size":"M","rating":5,"original":"Kain mmg cantik. Lembut.","english":"The fabric is indeed beautiful. Soft."},{"username":"T**p S**","size":"XXXL","rating":5,"original":"Design dan material abaya dari Arabista sangat berkualiti, akan repeat.","english":"Arabista abaya design and material are very high quality; will buy again."},{"username":"N**l","size":"S","rating":5,"original":"Saiz ngam. Puas hati. Kain cantik.","english":"Size fits. Satisfied. Beautiful fabric."},{"username":"W**i","size":"S","rating":5,"original":"Jubah cantik, kain sejuk. TQ","english":"Beautiful abaya, cool fabric. Thanks."},{"username":"S**a","size":"M","rating":5,"original":"Material selesa dan nice cutting. Suka sgt!","english":"Comfortable material and nice cutting. Love it!"},{"username":"N**a","size":"M","rating":5,"original":"Puas hati kain tebal. Jahitan kemas.","english":"Satisfied—the fabric is thick. Stitching is neat."},{"username":"H**a","size":"L","rating":5,"original":"Jahit kemas, kain cantik. Worth it!","english":"Neat stitching, beautiful fabric. Worth it!"},{"username":"N**e","size":"XXL","rating":5,"original":"Alhamdulillah, sampai cepat. Kain sejuk.","english":"Thank God, arrived quickly. Cool fabric."},{"username":"A**a","size":"S","rating":5,"original":"Cantik, cutting lawa. Sesuai utk hadiah.","english":"Beautiful, lovely cut. Suitable for gifts."},{"username":"A**m","size":"L","rating":5,"original":"Potongan cantik, kain jatuh elok.","english":"Nice cut, fabric drapes well."},{"username":"N**m","size":"XS","rating":5,"original":"Kain lembut nk pegang. Saiz XS ngam.","english":"Fabric is soft to the touch. Size XS fits."},{"username":"I**a","size":"M","rating":5,"original":"Kain tak panas, selesa pakai lama.","english":"Fabric isn’t hot; comfortable for long wear."},{"username":"S**h","size":"XL","rating":5,"original":"Box cantik, puas hati.","english":"The box is beautiful; satisfied."},{"username":"F**i","size":"M","rating":5,"original":"Suka sgt kain Nidha ni. Elegant.","english":"Really love this Nidha fabric. Elegant."},{"username":"N**d","size":"S","rating":5,"original":"Fast delivery. Seller helpful.","english":"Fast delivery. Helpful seller."},{"username":"A**a","size":"XXL","rating":5,"original":"Repeat order sbb kain best.","english":"Repeat order because the fabric is great."},{"username":"N**z","size":"L","rating":5,"original":"Size L ngam, kain tak jarang.","english":"Size L fits, fabric isn’t sheer."},{"username":"Z**a","size":"M","rating":5,"original":"Cantik utk raya juga. Akan order lagi.","english":"Beautiful for Raya too. Will order again."},{"username":"R**a","size":"XXL","rating":5,"original":"Kain jatuh and selesa bergerak.","english":"Fabric drapes and is comfortable to move in."},{"username":"H**n","size":"S","rating":5,"original":"Kain lembut, sy suka inner lengan.","english":"Soft fabric; I like the inner sleeve lining."},{"username":"F**a","size":"M","rating":5,"original":"Datang cepat, packing kemas.","english":"Came quickly, neat packing."},{"username":"N**s","size":"XL","rating":5,"original":"Mmg puas hati. Worth every ringgit.","english":"Very satisfied. Worth every ringgit."},{"username":"S**i","size":"S","rating":5,"original":"Nursing zip senang sgt.","english":"The nursing zip is very convenient."},{"username":"A**y","size":"XXXL","rating":5,"original":"XXXL pun cantik jatuh dia.","english":"Even XXXL drapes beautifully."},{"username":"K**m","size":"M","rating":5,"original":"Kain sejuk, tkn panas. Selesa.","english":"Cool fabric, not hot. Comfortable."},{"username":"I**n","size":"S","rating":5,"original":"Seller baik, size tukar cepat.","english":"Nice seller, size exchange was fast."},{"username":"D**a","size":"S","rating":5,"original":"Warna hitam elok, tak pudar.","english":"Black color is good, not faded."},{"username":"C**y","size":"M","rating":5,"original":"Terbaik. Akan beli lagi.","english":"Excellent. Will buy again."},{"username":"N**a","size":"M","rating":5,"original":"Suka packaging ada kotak.","english":"Love the packaging with a box."},{"username":"M**n","size":"L","rating":5,"original":"Sgt puas hati dgn kualiti.","english":"Very satisfied with the quality."},{"username":"S**y","size":"S","rating":5,"original":"Senang iron, tak mudah berkedut.","english":"Easy to iron, doesn’t crease easily."},{"username":"H**m","size":"XL","rating":5,"original":"Sesuai utk hadiah kahwin.","english":"Suitable as a wedding gift."},{"username":"R**n","size":"M","rating":5,"original":"Cutting A-line cantik.","english":"Beautiful A-line cutting."},{"username":"F**z","size":"S","rating":5,"original":"Selesa pakai lama di office.","english":"Comfortable for long wear at the office."},{"username":"L**n","size":"XS","rating":5,"original":"Sgt kemas jahitan.","english":"Very neat stitching."},{"username":"N**y","size":"S","rating":5,"original":"Inner lengan buat wudhu’ senang.","english":"Inner sleeve makes wudhu’ easy."},{"username":"W**a","size":"M","rating":5,"original":"Sgt puas hati. Lembut dan jatuh.","english":"Very satisfied. Soft and drapey."},{"username":"Q**a","size":"L","rating":5,"original":"Tak jarang, selamat pakai.","english":"Not sheer; safe to wear."},{"username":"S**n","size":"XXL","rating":5,"original":"Kualiti terbaik dgn harga.","english":"Best quality for the price."},{"username":"H**r","size":"S","rating":5,"original":"Saiz S ngam 150cm tinggi.","english":"Size S suits 150 cm height."},{"username":"R**f","size":"M","rating":5,"original":"Seller responsif, bantu pilih size.","english":"Responsive seller, helped choose size."},{"username":"A**q","size":"L","rating":5,"original":"Suka kain berat, nampak jatuh.","english":"Like the heavy fabric; nice drape."},{"username":"M**y","size":"XL","rating":5,"original":"Datang cepat, kotak elok.","english":"Arrived fast; box in good condition."},{"username":"I**e","size":"M","rating":5,"original":"Kain breathable, x panas.","english":"Breathable fabric, not hot."},{"username":"S**a","size":"S","rating":5,"original":"Zip depan memudahkan.","english":"Front zip makes it easy."},{"username":"N**r","size":"XXL","rating":5,"original":"XXL sesuai utk saya 80kg.","english":"XXL suits me (80 kg)."},{"username":"T**a","size":"M","rating":5,"original":"Classic look, minimal.","english":"Classic look, minimal."},{"username":"Z**h","size":"S","rating":5,"original":"Potongan kemas, cantik.","english":"Neat, beautiful cutting."},{"username":"J**a","size":"M","rating":5,"original":"Shawl percuma best kualiti.","english":"Free shawl is good quality."},{"username":"N**a","size":"L","rating":5,"original":"Length ngam utk saya 165cm.","english":"Length suits me at 165 cm."},{"username":"R**a","size":"M","rating":5,"original":"Abaya cantik utk kerja.","english":"Nice abaya for work."},{"username":"S**y","size":"S","rating":5,"original":"Selesa sgt utk travel.","english":"Very comfortable for travel."},{"username":"P**a","size":"S","rating":5,"original":"Suka kotak hadiah.","english":"Like the gift box."},{"username":"A**i","size":"XXXL","rating":5,"original":"XXXL cutting lawa.","english":"Nice cutting for XXXL."},{"username":"M**e","size":"M","rating":5,"original":"Harga berbaloi.","english":"Good value."},{"username":"N**h","size":"S","rating":5,"original":"Senang matching shawl.","english":"Easy to match the shawl."},{"username":"S**a","size":"S","rating":5,"original":"Kain tak melekat, airy.","english":"Doesn’t cling; airy."}];

    const PER_PAGE = 5;
    const list = document.getElementById('reviewList');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const pageNum = document.getElementById('pageNum');
    const pageTotal = document.getElementById('pageTotal');
    const tiktokPreview = document.getElementById('tiktokPreview');
    const reviewsSection = document.getElementById('reviews');

    const mkStar = (n)=>'★'.repeat(n||5);
    const esc = (s)=>String(s||'').replace(/[&<>]/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;'}[c]));
    const dot = '<span class="mx-2 text-white/30">•</span>';

    function reviewCard(r){
      const longOrig = (r.original||'').length > 160;
      const longEng  = (r.english||'').length > 160;
      const id = Math.random().toString(36).slice(2,8);
      return `
      <article class="p-4 sm:p-5">
        <div class="text-xs text-white/60 mb-1">
          <strong class="text-white/80">${esc(r.username)}</strong>${dot}
          Size: ${esc(r.size||'—')}${dot}
          <span aria-label="rating">${mkStar(r.rating)}</span>
        </div>
        <div class="space-y-2">
          <div class="text-sm leading-relaxed">
            <span class="text-white/60 block text-[12px] uppercase tracking-wide">Original</span>
            <p class="review-text ${longOrig?'clamp':''}" id="o-${id}">${esc(r.original||'')}</p>
            ${longOrig?`<button class="readmore text-xs underline decoration-white/30 hover:text-luxe" data-target="o-${id}">Read more</button>`:''}
          </div>
          <div class="text-sm leading-relaxed">
            <span class="text-white/60 block text-[12px] uppercase tracking-wide">Translated</span>
            <p class="review-text ${longEng?'clamp':''}" id="e-${id}">${esc(r.english||'')}</p>
            ${longEng?`<button class="readmore text-xs underline decoration-white/30 hover:text-luxe" data-target="e-${id}">Read more</button>`:''}
          </div>
        </div>
      </article>`;
    }

    function renderPage(p){
      const totalPages = Math.max(1, Math.ceil(FULL.length / PER_PAGE));
      const clamped = Math.min(Math.max(1, p), totalPages);
      const start = (clamped - 1) * PER_PAGE;
      const slice = FULL.slice(start, start + PER_PAGE);

      list.innerHTML = slice.map(reviewCard).join('');
      pageNum.textContent = clamped;
      pageTotal.textContent = totalPages;

      prevBtn.disabled = clamped === 1;
      nextBtn.disabled = clamped === totalPages;

      tiktokPreview.classList.toggle('hidden', clamped !== totalPages);
    }

    // Read more toggles (event delegation)
    list.addEventListener('click', (e)=>{
      const b = e.target.closest('.readmore');
      if(!b) return;
      const id = b.getAttribute('data-target');
      const p = document.getElementById(id);
      if(!p) return;
      p.classList.toggle('clamp');
      b.textContent = p.classList.contains('clamp') ? 'Read more' : 'Show less';
    });

    // Pagination events (scroll to top of reviews section)
    let current = 1;
    function scrollReviewsTop(){ reviewsSection.scrollIntoView({behavior:'smooth', block:'start'}); }
    prevBtn.addEventListener('click', ()=>{ if(current>1){ current--; renderPage(current); scrollReviewsTop(); } });
    nextBtn.addEventListener('click', ()=>{ const tp=Math.ceil(FULL.length/PER_PAGE); if(current<tp){ current++; renderPage(current); scrollReviewsTop(); } });

    // Initial render
    renderPage(current);
  })();
  </script>

<script>
(() => {
  const main = document.getElementById('mainImg');
  if (!main) return;
  const thumbs = Array.from(document.querySelectorAll('#gallery [data-src]'));
  let currentIndex = Math.max(0, thumbs.findIndex(b => b.classList.contains('thumb-active')));
  if (currentIndex < 0) currentIndex = 0;

  function show(i) {
    if (!thumbs.length) return;
    if (i < 0) i = thumbs.length - 1;
    if (i >= thumbs.length) i = 0;
    currentIndex = i;
    const src = thumbs[i].getAttribute('data-src');
    if (src) main.src = src;
    thumbs.forEach(btn => btn.classList.remove('thumb-active'));
    thumbs[i].classList.add('thumb-active');
  }

  // Ensure clicking thumbnails scrolls to the TOP of the page
  thumbs.forEach((btn, i) => {
    btn.addEventListener('click', () => {
      show(i);
      
    }, { passive: true });
  });

  // Arrow buttons for main image
  const prev = document.getElementById('imgPrev');
  const next = document.getElementById('imgNext');
  if (prev) prev.addEventListener('click', () => {
    show(currentIndex - 1);
    
  }, { passive: true });
  if (next) next.addEventListener('click', () => {
    show(currentIndex + 1);
    
  }, { passive: true });
})();
</script>


<script>
(() => {
  const main = document.getElementById('mainImg');
  if (!main) return;

  const thumbs = Array.from(document.querySelectorAll('#gallery [data-src]'));
  let currentIndex = Math.max(0, thumbs.findIndex(b => b.classList.contains('thumb-active')));
  if (currentIndex < 0) currentIndex = 0;

  function show(i) {
    if (!thumbs.length) return;
    if (i < 0) i = thumbs.length - 1;
    if (i >= thumbs.length) i = 0;
    currentIndex = i;
    const src = thumbs[i].getAttribute('data-src');
    if (src) main.src = src;
    thumbs.forEach(btn => btn.classList.remove('thumb-active'));
    thumbs[i].classList.add('thumb-active');
  }

  // Thumbnails: update image only (no scrolling)
  thumbs.forEach((btn, i) => {
    btn.addEventListener('click', () => show(i), { passive: true });
  });

  // Arrow buttons
  const prev = document.getElementById('imgPrev');
  const next = document.getElementById('imgNext');
  if (prev) prev.addEventListener('click', () => show(currentIndex - 1));
  if (next) next.addEventListener('click', () => show(currentIndex + 1));

  // Swipe support on the main image
  let startX = 0, startY = 0, active = false;
  const H_THRESHOLD = 32;   // px horizontal distance to count as swipe
  const V_TOLERANCE = 80;   // px vertical tolerance

  main.addEventListener('touchstart', (e) => {
    const t = e.changedTouches[0];
    startX = t.pageX; startY = t.pageY; active = true;
  }, { passive: true });

  main.addEventListener('touchend', (e) => {
    if (!active) return;
    const t = e.changedTouches[0];
    const dx = t.pageX - startX;
    const dy = t.pageY - startY;
    active = false;
    if (Math.abs(dx) > H_THRESHOLD && Math.abs(dy) < V_TOLERANCE) {
      if (dx < 0) show(currentIndex + 1); else show(currentIndex - 1);
    }
  }, { passive: true });
})();
</script>

</body>
</html>